<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:title" content="Knuffis Rezepte - Einfach, Simpel & Werbefrei">
    <meta property="og:description" content="Entdecke handgepr√ºfte Rezepte ohne unn√∂tiges Gerede. Kochen kann so einfach sein! Besuche knuffi-rezepte.de">
    <meta property="og:image" content="https://www.knuffi-rezepte.de/knuffi_koch.png">
    <meta property="og:url" content="https://www.knuffi-rezepte.de/">
    <meta property="og:type" content="website">
    <title>Knuffis Rezepte</title>

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Knuffis Rezepte",
      "url": "https://www.knuffi-rezepte.de/"
    }
    </script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Fredoka', sans-serif; }
    </style>

    <script>
        if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }
    </script>

    <script src="https://cdn.tailwindcss.com"></script>
    <script> tailwind.config = { darkMode: 'class' } </script>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7936159083612560" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-[#faf9f6] text-gray-800 dark:bg-gray-900 dark:text-gray-100 transition-colors duration-300 flex flex-col min-h-screen">

    <nav class="bg-white sticky top-0 z-50 dark:bg-gray-800 border-b-2 border-gray-900 dark:border-black transition-colors duration-300 no-print shadow-md dark:shadow-black/40">
        <div class="max-w-6xl mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center py-3 md:py-4 min-h-[80px]">

                <a href="index.html" class="text-3xl font-bold text-orange-600 mb-3 md:mb-0 transform hover:scale-105 transition">
                    Knuffis <span class="text-gray-800 dark:text-gray-100">Rezepte</span>
                </a>

                <div class="flex items-center gap-4 flex-wrap justify-center">
                    <a href="index.html" class="text-[#FF9F1C] font-extrabold text-sm md:text-base dark:text-orange-400 transition">Start</a>
                    <a href="alle-rezepte.html" class="text-gray-700 hover:text-orange-600 font-bold text-sm md:text-base dark:text-gray-300 dark:hover:text-orange-400 transition">Rezepte</a>
                    
                    <a href="neues-rezept.html" class="bg-orange-500 text-white px-4 py-2 rounded-lg font-bold border-2 border-gray-900 dark:border-black shadow-sm hover:shadow-md hover:-translate-y-0.5 transition text-sm">Einsenden</a>

                    <button onclick="toggleDarkMode()" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition font-bold text-xl" aria-label="Dark Mode umschalten">
                        <span id="dark-icon">üåô</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <header class="relative bg-[#FF9F1C] text-gray-900 py-12 flex items-center justify-center overflow-hidden border-b-2 border-gray-900 dark:border-black">
        <div class="relative z-10 text-center px-4">
            <h1 class="text-5xl md:text-6xl font-extrabold mb-3 text-white drop-shadow-md">Knuffis Rezepte</h1>
            <p class="text-xl md:text-2xl font-bold text-gray-900 bg-white/95 inline-block px-4 py-1.5 rounded-lg border-2 border-gray-900 dark:border-black shadow-md transform -rotate-1">Hier muss nicht alles perfekt aussehen, Hauptsache es schmeckt!</p>
        </div>
    </header>

    <main class="max-w-6xl mx-auto px-4 py-12 flex-grow relative">

        <section class="mb-12 relative z-10">
            <h2 class="text-4xl font-extrabold mb-8 dark:text-white inline-block bg-[#2EC4B6] text-white px-4 py-2 rounded-lg border-2 border-gray-900 dark:border-black shadow-md dark:shadow-black/50 transform -rotate-2">‚ú® Frisch eingetroffen</h2>

            <div id="newest-grid" class="grid grid-cols-1 md:grid-cols-3 gap-8">
                </div>
        </section>

        <div class="mb-16 bg-white dark:bg-gray-800 border-2 border-gray-900 dark:border-black rounded-2xl p-8 text-center shadow-lg dark:shadow-black/50 relative z-10 max-w-3xl mx-auto">
            <h3 class="text-3xl font-extrabold text-gray-900 dark:text-white mb-4">Gef√§llt dir Knuffis Rezepte?</h3>
            <p class="text-gray-700 dark:text-gray-300 font-medium text-lg mb-8 max-w-md mx-auto">
                Hilf mir, die Seite werbefrei zu halten und unterst√ºtze mich gerne mit einem Euro! Jede kleine Spende wandert direkt in die Rezeptentwicklung (oder in Schokolade).
            </p>
            <a href="https://ko-fi.com/knuffirezepte" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-3 bg-[#FF5E5B] text-white font-bold text-xl py-3 px-8 rounded-xl border-2 border-gray-900 dark:border-black shadow-md hover:shadow-lg hover:-translate-y-1 transition">
                <svg class="w-7 h-7" fill="currentColor" viewBox="0 0 24 24"><path d="M23.881 8.948c-.773-4.085-4.859-4.593-4.859-4.593H.723c-.604 0-.679.798-.679.798s-.082 7.324-.022 11.822c.164 2.424 2.586 2.672 2.586 2.672s8.267-.023 11.966-.049c2.438-.426 2.683-2.566 2.658-3.734 4.352.24 7.422-2.831 6.649-6.916zm-11.062 3.511c-1.246 1.453-4.011 3.976-4.011 3.976s-.121.119-.31.023c-.076-.057-.108-.09-.108-.09-.443-.441-3.368-3.049-4.061-4.3-.037-.046-.054-.09-.054-.118-.014-.047-.02-.093-.016-.145.034-.146.069-.279.108-.403.228-.544.502-1.05.996-1.391.802-.553 1.849-.452 2.607.126.312.238.587.545.836.885.166.226.471.226.637 0 .249-.34.524-.647.836-.885.758-.578 1.805-.679 2.607-.126.494.341.768.847.996 1.391.039.124.074.257.108.403.004.052-.002.098-.016.145-.001.028-.017.072-.054.118-.328.666-2.571 3.256-3.491 4.258zM20.804 13.064c-.114.733-.943 1.006-1.921 1.053V6.992c1.944.021 3.292.544 3.514 2.404.225 1.859-.479 2.935-1.593 3.668z"/></svg>
                <span>Unterst√ºtze Knuffi</span>
            </a>
        </div>

        <section class="mb-16 relative z-10">
            <h2 class="text-4xl font-extrabold mb-8 dark:text-white inline-block bg-orange-100 dark:bg-gray-800 px-4 py-2 rounded-lg border-2 border-gray-900 dark:border-black shadow-md dark:shadow-black/50 transform -rotate-1">Unsere Highlights</h2>

            <div id="highlights-grid" class="grid grid-cols-1 md:grid-cols-3 gap-8">
                </div>
        </section>

        <section class="mb-12 relative z-10">
            <h3 class="text-2xl font-extrabold mb-6 text-gray-800 dark:text-gray-200">ü§î Lust auf etwas anderes?</h3>

            <div id="random-grid" class="grid grid-cols-2 md:grid-cols-4 gap-6">
                </div>
        </section>

        <img src="knuffi_koch.png"
             alt="Knuffi der Koch"
             class="block relative mx-auto my-12 w-40
                    2xl:absolute 2xl:-left-56 2xl:top-16 2xl:w-56 2xl:my-0 2xl:mx-0
                    pointer-events-none transform -rotate-6 drop-shadow-[0_15px_15px_rgba(0,0,0,0.3)] opacity-95 z-0">

        <div class="mt-12 max-w-2xl mx-auto text-center px-4 no-print relative z-10">
            <div class="bg-[#FFE5D9] dark:bg-gray-800 border-2 border-gray-900 dark:border-black rounded-2xl p-8 shadow-lg dark:shadow-black/50 transform rotate-1 hover:rotate-0 transition duration-300">
                <p class="text-gray-800 dark:text-gray-200 font-medium text-lg leading-relaxed">
                    <span class="text-4xl block mb-2">üì∏</span>
                    <strong class="text-xl">Kleiner Realit√§ts-Check:</strong><br>
                    Die Bilder hier sind (noch) schicke Platzhalter.
                    Wenn dein Ergebnis auf dem Teller eher nach "kreativem Unfall" aussieht:
                    Keine Panik, das muss so! Hauptsache es schmeckt. üòâ
                </p>
            </div>
        </div>

    </main>

    <footer class="bg-gray-900 text-gray-300 py-10 mt-16 border-t-4 border-gray-800 no-print">
        <div class="max-w-6xl mx-auto px-4 text-center">
            <p class="font-bold text-lg mb-2">&copy; 2026 Knuffis Rezepte. Alle Rechte vorbehalten.</p>
            <div class="mt-4 space-x-6 text-sm font-medium">
                <a href="impressum.html" class="hover:text-orange-400 underline decoration-2 underline-offset-4 transition">Impressum</a>
                <a href="datenschutz.html" class="hover:text-orange-400 underline decoration-2 underline-offset-4 transition">Datenschutz</a>
            </div>
        </div>
    </footer>

    <script src="rezepte.js"></script>
    <script>
        function toggleDarkMode() {
            if (document.documentElement.classList.contains('dark')) {
                document.documentElement.classList.remove('dark');
                localStorage.setItem('theme', 'light');
            } else {
                document.documentElement.classList.add('dark');
                localStorage.setItem('theme', 'dark');
            }
        }

        // Hilfsfunktion zum Datum vergleichen
        function parseGermanDate(dateStr) {
            if (!dateStr) return 0;
            const parts = dateStr.split('.'); 
            return new Date(parts[2], parts[1] - 1, parts[0]).getTime();
        }

        const allRecipesArray = Object.entries(rezeptDaten);

        // --- 1. DIE 3 NEUESTEN REZEPTE LADEN ---
        const newestContainer = document.getElementById('newest-grid');
        
        // Rezepte nach Datum sortieren (neueste zuerst)
        allRecipesArray.sort((a, b) => {
            const dateA = parseGermanDate(a[1].datum || "01.01.2020");
            const dateB = parseGermanDate(b[1].datum || "01.01.2020");
            return dateB - dateA;
        });

        // Die ersten 3 IDs extrahieren
        const newestIDs = allRecipesArray.slice(0, 3).map(entry => entry[0]);

        newestIDs.forEach(id => {
            const rezept = rezeptDaten[id];
            
            // Karte mit NEU-Badge
            const cardHTML = `
            <a href="rezept.html?id=${id}" class="block group transform transition-all duration-300 hover:-translate-y-2 h-full">
                <div class="bg-white rounded-2xl border-2 border-gray-900 dark:border-black shadow-lg group-hover:shadow-xl overflow-hidden flex flex-col h-full dark:bg-gray-800 dark:shadow-black/60">
                    
                    <div class="h-56 overflow-hidden relative border-b-2 border-gray-900 dark:border-black">
                        <img src="${rezept.bild}" class="w-full h-full object-cover transform group-hover:scale-110 transition duration-500" onerror="this.src='https://placehold.co/600x400?text=Kein+Bild'">
                        
                        <div class="absolute top-4 right-4 bg-[#2EC4B6] text-white text-sm font-extrabold px-3 py-1.5 rounded-lg border-2 border-gray-900 dark:border-black transform rotate-[6deg] shadow-sm tracking-wide">
                            NEU!
                        </div>
                    </div>
                    
                    <div class="p-6 flex-grow flex flex-col">
                        <h3 class="text-3xl font-extrabold group-hover:text-[#FF9F1C] transition text-gray-900 dark:text-gray-100 mb-4 leading-tight">${rezept.titel}</h3>
                        
                        <div class="mt-auto flex flex-wrap gap-2">
                            <span class="bg-orange-100 text-orange-800 text-sm font-bold px-3 py-1.5 rounded-lg border border-gray-900 dark:border-black dark:bg-orange-900/50 dark:text-orange-300 shadow-sm">‚è±Ô∏è ${rezept.zeit}</span>
                            <span class="bg-green-100 text-green-800 text-sm font-bold px-3 py-1.5 rounded-lg border border-gray-900 dark:border-black dark:bg-green-900/50 dark:text-green-300 shadow-sm">${rezept.kategorie.split(',')[0]}</span>
                        </div>
                    </div>
                </div>
            </a>`;
            newestContainer.innerHTML += cardHTML;
        });


        // --- 2. HIGHLIGHTS KARTEN ---
        const highlightsContainer = document.getElementById('highlights-grid');
        const highlightIDs = ['pizzateig', 'chili', 'sloppy_joe'];

        highlightIDs.forEach(id => {
            const rezept = rezeptDaten[id];
            if(!rezept) return; 

            const cardHTML = `
            <a href="rezept.html?id=${id}" class="block group transform transition-all duration-300 hover:-translate-y-2 h-full">
                <div class="bg-white rounded-2xl border-2 border-gray-900 dark:border-black shadow-lg group-hover:shadow-xl overflow-hidden flex flex-col h-full dark:bg-gray-800 dark:shadow-black/60">
                    
                    <div class="h-56 overflow-hidden relative border-b-2 border-gray-900 dark:border-black">
                        <img src="${rezept.bild}" class="w-full h-full object-cover transform group-hover:scale-110 transition duration-500" onerror="this.src='https://placehold.co/600x400?text=Kein+Bild'">
                        
                        <div class="absolute top-4 right-4 bg-[#FF9F1C] text-gray-900 text-sm font-extrabold px-3 py-1.5 rounded-lg border-2 border-gray-900 dark:border-black transform rotate-[6deg] shadow-sm">
                            TIPP!
                        </div>
                    </div>
                    
                    <div class="p-6 flex-grow flex flex-col">
                        <h3 class="text-3xl font-extrabold group-hover:text-[#FF9F1C] transition text-gray-900 dark:text-gray-100 mb-4 leading-tight">${rezept.titel}</h3>
                        
                        <div class="mt-auto flex flex-wrap gap-2">
                            <span class="bg-orange-100 text-orange-800 text-sm font-bold px-3 py-1.5 rounded-lg border border-gray-900 dark:border-black dark:bg-orange-900/50 dark:text-orange-300 shadow-sm">‚è±Ô∏è ${rezept.zeit}</span>
                            <span class="bg-green-100 text-green-800 text-sm font-bold px-3 py-1.5 rounded-lg border border-gray-900 dark:border-black dark:bg-green-900/50 dark:text-green-300 shadow-sm">${rezept.kategorie.split(',')[0]}</span>
                        </div>
                    </div>
                </div>
            </a>`;
            highlightsContainer.innerHTML += cardHTML;
        });


        // --- 3. ZUF√ÑLLIGE KARTEN & ALLE ANZEIGEN ---
        const randomContainer = document.getElementById('random-grid');
        const allIDs = Object.keys(rezeptDaten);
        
        // Neu: Filtere die IDs heraus, die bereits als "Neu" oder als "Highlight" angezeigt werden
        const excludeIDs = [...newestIDs, ...highlightIDs];
        const pool = allIDs.filter(id => !excludeIDs.includes(id));

        for (let i = pool.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [pool[i], pool[j]] = [pool[j], pool[i]];
        }
        const randomSelection = pool.slice(0, 3);

        randomSelection.forEach(id => {
            const rezept = rezeptDaten[id];
            const cardHTML = `
            <a href="rezept.html?id=${id}" class="block group transform transition-all duration-300 hover:-translate-y-1 h-full">
                <div class="bg-white rounded-xl border-2 border-gray-900 dark:border-black shadow-md group-hover:shadow-lg overflow-hidden flex flex-col h-full dark:bg-gray-800 dark:shadow-black/50">
                    <div class="h-32 overflow-hidden border-b-2 border-gray-900 dark:border-black">
                        <img src="${rezept.bild}" class="w-full h-full object-cover group-hover:scale-110 transition duration-500" onerror="this.src='https://placehold.co/600x400?text=...'">
                    </div>
                    <div class="p-4">
                        <h4 class="font-bold text-lg leading-tight text-gray-900 dark:text-gray-100 group-hover:text-[#FF9F1C] transition line-clamp-2">${rezept.titel}</h4>
                        <span class="text-sm font-bold text-gray-500 mt-2 block">‚è±Ô∏è ${rezept.zeit}</span>
                    </div>
                </div>
            </a>`;
            randomContainer.innerHTML += cardHTML;
        });

        const moreCardHTML = `
        <a href="alle-rezepte.html" class="block group transform transition-all duration-300 hover:-translate-y-1 h-full">
            <div class="bg-[#FFE5D9] rounded-xl border-2 border-dashed border-gray-900 dark:border-black shadow-md group-hover:shadow-lg flex flex-col items-center justify-center h-full min-h-[180px] dark:bg-gray-800 dark:shadow-black/50">
                <div class="bg-white p-3 rounded-full border-2 border-gray-900 dark:border-black shadow-sm mb-3 group-hover:rotate-12 transition duration-300 dark:bg-gray-700">
                    <span class="text-3xl">üìö</span>
                </div>
                <span class="font-extrabold text-gray-900 text-xl dark:text-gray-100">Alle Rezepte</span>
                <span class="text-md font-bold text-orange-600 dark:text-orange-400 mt-1">St√∂bern &rarr;</span>
            </div>
        </a>`;
        randomContainer.innerHTML += moreCardHTML;

    </script>
</body>
</html>
