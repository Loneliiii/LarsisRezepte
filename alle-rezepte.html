<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alle Rezepte - Simple Gourmet</title>
    
    <script>
        if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }
    </script>

    <script src="https://cdn.tailwindcss.com"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7936159083612560" crossorigin="anonymous"></script>
    <script> tailwind.config = { darkMode: 'class' } </script>
    <link rel="stylesheet" href="style.css">
    <script src="main.js" defer></script>
</head>
<body class="bg-gray-50 text-gray-800 font-sans dark:bg-gray-900 dark:text-gray-100 transition-colors duration-300 flex flex-col min-h-screen">

    <nav class="bg-white shadow-md sticky top-0 z-50 dark:bg-gray-800 dark:border-b dark:border-gray-700 transition-colors duration-300 no-print">
        <div class="max-w-6xl mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center py-3 md:py-4 min-h-[80px]">
                
                <a href="index.html" class="text-2xl font-bold text-orange-600 mb-3 md:mb-0">
                    Larsi's <span class="text-gray-700 dark:text-gray-300">Simple Rezepte</span>
                </a>
                
                <div class="flex items-center gap-3 flex-wrap justify-center">
                    <a href="index.html" class="text-gray-600 hover:text-orange-600 font-medium text-sm md:text-base dark:text-gray-300 dark:hover:text-orange-400">Start</a>
                    <a href="alle-rezepte.html" class="text-gray-600 hover:text-orange-600 font-medium text-sm md:text-base dark:text-gray-300 dark:hover:text-orange-400">Rezepte</a>
                    <a href="neues-rezept.html" class="bg-orange-600 text-white px-3 py-2 rounded-lg hover:bg-orange-700 transition shadow-sm text-sm">Einsenden</a>
                    <button onclick="toggleDarkMode()" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition"><span id="dark-icon">üåô</span></button>
                </div>
            </div>
        </div>
    </nav>

    <main class="max-w-6xl mx-auto px-4 py-12 flex-grow">
        <div class="flex flex-col md:flex-row justify-between items-end mb-8 border-b dark:border-gray-700 pb-4">
            <div>
                <h1 class="text-4xl font-bold dark:text-white">Alle Rezepte</h1>
                <p class="text-gray-500 mt-2 dark:text-gray-400">St√∂bere durch die komplette Sammlung.</p>
            </div>
            <div class="text-gray-400 text-sm mt-4 md:mt-0">
                Zeige <span id="showing-info">...</span> Rezepte
            </div>
        </div>

        <div id="rezept-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            </div>

        <div id="pagination" class="flex justify-center items-center space-x-2 mt-12">
            </div>
    </main>

    <footer class="bg-gray-800 text-gray-300 py-8 mt-12 dark:bg-black dark:text-gray-500">
        <div class="max-w-6xl mx-auto px-4 text-center"><p>&copy; 2026 Lars' Rezepte. Alle Rechte vorbehalten.</p></div>
    </footer>

    <script src="rezepte.js"></script>
    <script>
        // EINSTELLUNGEN
        const ITEMS_PER_PAGE = 25; // Wie viele pro Seite?
        let currentPage = 1;

        // Wir wandeln das Objekt aus rezepte.js in ein Array um, damit wir z√§hlen k√∂nnen
        // Format: [ ['id', {daten}], ['id', {daten}] ]
        const allRecipesArray = Object.entries(rezeptDaten);

        function renderPage(page) {
            const grid = document.getElementById('rezept-grid');
            grid.innerHTML = ''; // Grid leeren

            // Start und Ende berechnen
            const start = (page - 1) * ITEMS_PER_PAGE;
            const end = start + ITEMS_PER_PAGE;
            
            // Nur die Rezepte f√ºr diese Seite holen
            const pageItems = allRecipesArray.slice(start, end);

            // Karten generieren
            pageItems.forEach(([id, data]) => {
                // HTML Template string (gleiches Design wie Index)
                const cardHTML = `
                <a href="rezept.html?id=${id}" class="block group animate-fade-in">
                    <div class="bg-white rounded-xl shadow-lg overflow-hidden card-zoom dark:bg-gray-800 dark:shadow-gray-900/50 h-full flex flex-col">
                        <div class="h-56 overflow-hidden relative">
                            <img src="${data.bild}" class="w-full h-full object-cover">
                        </div>
                        <div class="p-6 flex-grow flex flex-col">
                            <div class="mb-2">
                                <span class="bg-gray-100 text-gray-600 text-xs font-bold px-2 py-1 rounded-full uppercase dark:bg-gray-700 dark:text-gray-300">${data.kategorie}</span>
                            </div>
                            <h3 class="text-xl font-bold group-hover:text-orange-600 transition dark:text-gray-100 mb-2">${data.titel}</h3>
                            <div class="mt-auto flex items-center text-gray-400 text-sm dark:text-gray-500">
                                <span>‚è±Ô∏è ${data.zeit}</span>
                            </div>
                        </div>
                    </div>
                </a>
                `;
                grid.innerHTML += cardHTML;
            });

            // Info Text updaten (z.B. "Zeige 1-25 von 50")
            const total = allRecipesArray.length;
            const currentShow = Math.min(end, total);
            document.getElementById('showing-info').innerText = `${start + 1}-${currentShow} von ${total}`;

            renderPagination(page, total);
            
            // Nach oben scrollen bei Seitenwechsel
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function renderPagination(current, totalItems) {
            const container = document.getElementById('pagination');
            container.innerHTML = '';
            const totalPages = Math.ceil(totalItems / ITEMS_PER_PAGE);

            if (totalPages <= 1) return; // Keine Buttons n√∂tig bei nur 1 Seite

            // Zur√ºck Button
            const prevBtn = document.createElement('button');
            prevBtn.innerHTML = '&larr;';
            prevBtn.className = `px-4 py-2 rounded-lg border ${current === 1 ? 'text-gray-300 border-gray-200 cursor-not-allowed dark:border-gray-700 dark:text-gray-600' : 'text-gray-600 border-gray-300 hover:bg-gray-100 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700'}`;
            prevBtn.onclick = () => { if(current > 1) { currentPage--; renderPage(currentPage); }};
            container.appendChild(prevBtn);

            // Zahlen Buttons
            for (let i = 1; i <= totalPages; i++) {
                const btn = document.createElement('button');
                btn.innerText = i;
                if (i === current) {
                    btn.className = 'px-4 py-2 rounded-lg bg-orange-600 text-white font-bold shadow-md';
                } else {
                    btn.className = 'px-4 py-2 rounded-lg border border-gray-300 text-gray-600 hover:bg-gray-100 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700';
                }
                btn.onclick = () => { currentPage = i; renderPage(currentPage); };
                container.appendChild(btn);
            }

            // Vorw√§rts Button
            const nextBtn = document.createElement('button');
            nextBtn.innerHTML = '&rarr;';
            nextBtn.className = `px-4 py-2 rounded-lg border ${current === totalPages ? 'text-gray-300 border-gray-200 cursor-not-allowed dark:border-gray-700 dark:text-gray-600' : 'text-gray-600 border-gray-300 hover:bg-gray-100 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700'}`;
            nextBtn.onclick = () => { if(current < totalPages) { currentPage++; renderPage(currentPage); }};
            container.appendChild(nextBtn);
        }

        // Init beim Laden
        renderPage(currentPage);

    </script>
</body>
</html>
